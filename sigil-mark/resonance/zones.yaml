# Sigil Resonance: Zones
# Zones define physics context for file paths.

zones:
  # ═══════════════════════════════════════════════════════════════════
  # PHILOSOPHY
  # ═══════════════════════════════════════════════════════════════════

  philosophy:
    insight: |
      The same component behaves differently in different zones.
      A button in /checkout feels different than in /explore.

      Zones are detected from FILE PATH, not component type.
      This means physics are automatic, not manual.

    principle: |
      Zone determines: sync authority, tick rate, material, budget.
      The agent reads the zone and applies physics automatically.

  # ═══════════════════════════════════════════════════════════════════
  # ZONE DEFINITIONS
  # ═══════════════════════════════════════════════════════════════════

  definitions:
    critical:
      id: "critical"
      name: "Critical"
      description: "High-stakes, irreversible actions"

      physics:
        sync: server_authoritative
        tick: discrete
        tick_rate_ms: 600
        material: clay
        budget:
          interactive_elements: 5
          decisions: 2
          animations: 1

      paths:
        - "**/checkout/**"
        - "**/claim/**"
        - "**/confirm/**"
        - "**/delete/**"
        - "**/transaction/**"
        - "**/payment/**"
        - "**/withdraw/**"

      tension_overrides:
        playfulness: 20
        weight: 80
        density: 30
        speed: 30

      agent_rule: |
        CRITICAL ZONE — Maximum trust required.
        - NO optimistic UI (wait for server)
        - Discrete tick (600ms rhythm)
        - Clay material (heavy, deliberate)
        - Minimal interactive elements (5 max)
        - The delay IS the trust

    transactional:
      id: "transactional"
      name: "Transactional"
      description: "Routine operations, frequent actions"

      physics:
        sync: client_authoritative
        tick: continuous
        tick_rate_ms: 0
        material: machinery
        budget:
          interactive_elements: 12
          decisions: 5
          animations: 2

      paths:
        - "**/dashboard/**"
        - "**/settings/**"
        - "**/list/**"
        - "**/table/**"
        - "**/form/**"
        - "**/edit/**"

      tension_overrides:
        playfulness: 30
        weight: 40
        density: 60
        speed: 80

      agent_rule: |
        TRANSACTIONAL ZONE — Efficiency is priority.
        - Optimistic UI expected
        - Continuous tick (instant)
        - Machinery material (flat, efficient)
        - Moderate interactive elements (12 max)
        - The lie IS the speed

    exploratory:
      id: "exploratory"
      name: "Exploratory"
      description: "Discovery, browsing, learning"

      physics:
        sync: client_authoritative
        tick: continuous
        tick_rate_ms: 0
        material: glass
        budget:
          interactive_elements: 20
          decisions: 10
          animations: 5

      paths:
        - "**/explore/**"
        - "**/discover/**"
        - "**/browse/**"
        - "**/gallery/**"
        - "**/learn/**"
        - "**/docs/**"

      tension_overrides:
        playfulness: 70
        weight: 20
        density: 40
        speed: 60

      agent_rule: |
        EXPLORATORY ZONE — Delight encouraged.
        - Optimistic UI expected
        - Continuous tick
        - Glass material (light, magical)
        - Rich interactive elements (20 max)
        - Discovery should feel effortless

    marketing:
      id: "marketing"
      name: "Marketing"
      description: "Promotional, landing pages, acquisition"

      physics:
        sync: client_authoritative
        tick: continuous
        tick_rate_ms: 0
        material: glass
        budget:
          interactive_elements: 15
          decisions: 3
          animations: 5

      paths:
        - "**/landing/**"
        - "**/marketing/**"
        - "**/promo/**"
        - "**/home/**"
        - "**/about/**"
        - "**/pricing/**"

      tension_overrides:
        playfulness: 80
        weight: 30
        density: 30
        speed: 50

      agent_rule: |
        MARKETING ZONE — Impact and delight.
        - Animations for engagement
        - Glass material
        - Focused decisions (3 max)
        - Playfulness high
        - First impressions matter

    admin:
      id: "admin"
      name: "Admin"
      description: "Power users, data-heavy, utility"

      physics:
        sync: client_authoritative
        tick: continuous
        tick_rate_ms: 0
        material: machinery
        budget:
          interactive_elements: 30
          decisions: 10
          animations: 1

      paths:
        - "**/admin/**"
        - "**/console/**"
        - "**/debug/**"
        - "**/tools/**"
        - "**/internal/**"

      tension_overrides:
        playfulness: 10
        weight: 50
        density: 80
        speed: 90

      agent_rule: |
        ADMIN ZONE — Power user efficiency.
        - Dense information allowed
        - Machinery material
        - Many interactive elements (30 max)
        - Minimal animation
        - Function over form

  # ═══════════════════════════════════════════════════════════════════
  # DEFAULT ZONE
  # ═══════════════════════════════════════════════════════════════════

  default:
    id: "default"
    name: "Default"
    description: "Fallback when no zone matches"

    physics:
      sync: client_authoritative
      tick: continuous
      tick_rate_ms: 0
      material: machinery
      budget:
        interactive_elements: 15
        decisions: 5
        animations: 2

    tension_overrides:
      playfulness: 50
      weight: 50
      density: 50
      speed: 50

    agent_rule: |
      DEFAULT ZONE — Balanced fallback.
      When path matches no zone, use sensible defaults.
      Consider explicitly mapping paths to zones.

  # ═══════════════════════════════════════════════════════════════════
  # ZONE RESOLUTION
  # ═══════════════════════════════════════════════════════════════════

  resolution:
    description: |
      How zones are detected from file paths.

    algorithm:
      1: "Get current file path"
      2: "For each zone in priority order"
      3: "Check if path matches any glob pattern"
      4: "Return first matching zone"
      5: "If no match, return default zone"

    priority_order:
      - critical    # Check first (highest stakes)
      - admin       # Check second (power users)
      - marketing   # Check third (specific pages)
      - transactional  # Check fourth (common pattern)
      - exploratory    # Check fifth (discovery)
      - default        # Fallback

    examples:
      - path: "src/features/checkout/ConfirmButton.tsx"
        matches: "**/checkout/**"
        zone: critical

      - path: "src/features/dashboard/StatCard.tsx"
        matches: "**/dashboard/**"
        zone: transactional

      - path: "src/features/explore/GalleryItem.tsx"
        matches: "**/explore/**"
        zone: exploratory

      - path: "src/components/Button.tsx"
        matches: "none"
        zone: default
        note: "Shared components use default; context is in usage"

  # ═══════════════════════════════════════════════════════════════════
  # AGENT RULES
  # ═══════════════════════════════════════════════════════════════════

  agent_rules:
    before_generating: |
      1. Determine zone from file path
      2. Load zone physics (sync, tick, material, budget)
      3. Apply tension overrides
      4. Check budget constraints
      5. Generate with zone-appropriate patterns

    on_shared_component: |
      Shared components (src/components/*) use DEFAULT zone.
      The actual zone context comes from WHERE they're used.
      Consider adding zone-aware variants if needed.

    on_zone_mismatch: |
      If component feels wrong for its zone:
      1. Check if file is in correct directory
      2. Consider moving to appropriate zone
      3. Or add explicit zone override via prop
