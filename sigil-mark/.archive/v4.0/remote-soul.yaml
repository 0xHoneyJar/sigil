# Remote Soul Configuration - Sigil v4.1
# ==============================================================================
#
# Defines the boundary between engineering-controlled (kernel) and
# marketing-controlled (vibe) configuration.
#
# KERNEL: Engineering controls. NEVER exposed to remote config.
# VIBES:  Marketing controls. Can be updated via LaunchDarkly/Statsig.
#
# This separation ensures:
# - Physics and sync strategies remain stable (kernel)
# - Seasonal themes and intensity can be A/B tested (vibes)
# - Marketing can experiment without breaking core UX
#
# ==============================================================================

version: "4.1.0"

# =============================================================================
# KERNEL LOCKED
# =============================================================================
# These keys are NEVER exposed to remote configuration.
# Only engineering can modify these through code changes.
# Marketing requests changes through /consult decisions.

kernel_locked:
  # Physics timing and motion
  # Reason: Inconsistent physics creates jarring UX
  - physics
  - physics.instant
  - physics.snappy
  - physics.warm
  - physics.deliberate
  - physics.reassuring
  - physics.celebratory
  - physics.reduced

  # Sync strategies
  # Reason: Wrong sync strategy causes data loss or confusion
  - sync
  - sync.pessimistic
  - sync.optimistic
  - sync.hybrid

  # Protected zones
  # Reason: Critical zones handle money - cannot be A/B tested
  - protected_zones
  - zones.critical
  - zones.critical.sync
  - zones.critical.timeAuthority

  # Persona timing overrides
  # Reason: Accessibility and motion sensitivity must be stable
  - persona_overrides.accessibility
  - persona_overrides.accessibility.motion

# =============================================================================
# VIBE REMOTE
# =============================================================================
# These keys CAN be controlled via remote configuration.
# Marketing can A/B test these without engineering approval.
# Changes apply in real-time (within refresh interval).

vibe_remote:
  # Essence/Theme
  # What: Visual theme and seasonal feel
  # Example: "summer" makes the app feel warmer
  - essence.seasonal_theme
  - essence.color_temp       # warm, cool, neutral

  # Landing page energy
  # What: Hero section animation intensity
  # Example: "playful" adds more bounce to CTAs
  - landing.hero_energy      # playful, professional

  # Onboarding warmth
  # What: How friendly vs direct onboarding feels
  # Example: "friendly" shows more encouragement
  - onboarding.warmth        # friendly, direct

  # Celebration intensity
  # What: How big success moments feel
  # Example: "triumphant" shows confetti on claims
  - celebration.intensity    # subtle, triumphant

  # Timing modifier
  # What: Global multiplier for animation timing
  # Example: 1.2 makes everything 20% slower (more deliberate)
  # Constraints: 0.5 - 2.0 (cannot make instant or break UX)
  - timing.modifier          # 0.5 to 2.0

# =============================================================================
# INTEGRATION
# =============================================================================
# Remote config provider settings.

integration:
  # Provider type
  # Supported: launchdarkly, statsig, local
  provider: launchdarkly

  # Fallback behavior when remote unavailable
  # Strategy:
  #   - local: Use localVibes from SigilProvider
  #   - last_known: Use cached values
  #   - defaults: Use hardcoded defaults
  fallback: local

  # Refresh interval in seconds
  # How often to poll for updates (0 = streaming only)
  refresh: 30

  # Timeout for initial fetch in milliseconds
  # If exceeded, use fallback immediately
  # This ensures UI doesn't flash or hang on slow networks
  timeout_ms: 100

# =============================================================================
# FLAG MAPPINGS
# =============================================================================
# Maps vibe keys to remote config flag names.
# Allows decoupling Sigil concepts from provider-specific naming.

flag_mappings:
  # LaunchDarkly flag names
  launchdarkly:
    essence.seasonal_theme: "sigil-seasonal-theme"
    essence.color_temp: "sigil-color-temp"
    landing.hero_energy: "sigil-hero-energy"
    onboarding.warmth: "sigil-onboarding-warmth"
    celebration.intensity: "sigil-celebration-intensity"
    timing.modifier: "sigil-timing-modifier"

  # Statsig parameter names
  statsig:
    essence.seasonal_theme: "sigil_seasonal_theme"
    essence.color_temp: "sigil_color_temp"
    landing.hero_energy: "sigil_hero_energy"
    onboarding.warmth: "sigil_onboarding_warmth"
    celebration.intensity: "sigil_celebration_intensity"
    timing.modifier: "sigil_timing_modifier"

# =============================================================================
# DEFAULTS
# =============================================================================
# Default vibe values when no remote config is available.

defaults:
  seasonal_theme: default
  color_temp: neutral
  hero_energy: professional
  warmth: friendly
  celebration_intensity: subtle
  timing_modifier: 1.0

# =============================================================================
# CONSTRAINTS
# =============================================================================
# Validation rules for vibe values.
# Ensures marketing can't break UX with invalid values.

constraints:
  timing_modifier:
    min: 0.5
    max: 2.0
    description: "Timing multiplier must be 0.5-2.0 to maintain usable UX"

  seasonal_theme:
    allowed: [default, summer, winter, spring, fall]
    description: "Must be a defined seasonal theme"

  hero_energy:
    allowed: [playful, professional]
    description: "Hero energy level"

  warmth:
    allowed: [friendly, direct]
    description: "Onboarding warmth level"

  celebration_intensity:
    allowed: [subtle, triumphant]
    description: "Celebration intensity level"

  color_temp:
    allowed: [warm, cool, neutral]
    description: "Color temperature"

# =============================================================================
# EXAMPLES
# =============================================================================
# Example campaigns showing how marketing might configure vibes.

examples:
  summer_gold:
    description: "Summer campaign - warm and celebratory"
    vibes:
      seasonal_theme: summer
      color_temp: warm
      hero_energy: playful
      warmth: friendly
      celebration_intensity: triumphant
      timing_modifier: 0.9  # Slightly faster, more energetic

  winter_pro:
    description: "Winter campaign - professional and deliberate"
    vibes:
      seasonal_theme: winter
      color_temp: cool
      hero_energy: professional
      warmth: direct
      celebration_intensity: subtle
      timing_modifier: 1.1  # Slightly slower, more deliberate

  new_user_friendly:
    description: "New user onboarding - extra friendly"
    vibes:
      seasonal_theme: default
      warmth: friendly
      celebration_intensity: triumphant
      timing_modifier: 1.2  # Slower for newcomers

# =============================================================================
# DOCUMENTATION
# =============================================================================
# For full marketing setup guide, see: docs/MARKETING-VIBES.md
