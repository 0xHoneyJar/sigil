# Sigil Core: Fidelity Ceiling (Mod Ghost Rule)
# Technical superiority is NOT justification for breaking resonance.

fidelity:
  # ═══════════════════════════════════════════════════════════════════
  # THE MOD GHOST RULE
  # ═══════════════════════════════════════════════════════════════════

  philosophy:
    name: "Mod Ghost Rule"
    origin: "OSRS HD debate"
    statement: |
      "Better" graphics that don't match the product's soul are WORSE.
      Technical capability is not design justification.

      The ceiling exists not because we CAN'T go higher,
      but because going higher would break resonance.

    example: |
      117HD is beautiful. But it's a LENS, not a replacement.
      The core game remains pixel-art because that IS the soul.
      Players choose to overlay HD; the source stays true.

  # ═══════════════════════════════════════════════════════════════════
  # CEILING CONSTRAINTS
  # ═══════════════════════════════════════════════════════════════════

  ceilings:
    gradients:
      max_stops: 2
      description: "Maximum color stops in any gradient"
      reason: "More stops = more visual weight = less focus"
      violation: "CEILING_VIOLATION"
      examples:
        valid:
          - "linear-gradient(to-b, blue.500, blue.700)"
          - "radial-gradient(circle, white, transparent)"
        invalid:
          - "linear-gradient(to-b, blue.300, blue.500, blue.700, blue.900)"
          - "rainbow-gradient with 7 stops"

    shadows:
      max_layers: 3
      description: "Maximum shadow layers on any element"
      reason: "Shadow stacking creates visual noise"
      violation: "CEILING_VIOLATION"
      layers:
        - name: "ambient"
          purpose: "Subtle lift from surface"
          example: "0 1px 3px rgba(0,0,0,0.12)"
        - name: "key"
          purpose: "Primary directional shadow"
          example: "0 4px 6px rgba(0,0,0,0.16)"
        - name: "accent"
          purpose: "Dramatic emphasis (use sparingly)"
          example: "0 10px 20px rgba(0,0,0,0.19)"

    animation:
      max_duration_ms: 800
      description: "Maximum duration for any single animation"
      reason: "Longer animations block user flow"
      violation: "CEILING_VIOLATION"
      zones:
        critical:
          preferred_ms: 200
          max_ms: 400
          reason: "Critical actions should feel immediate"
        transactional:
          preferred_ms: 150
          max_ms: 300
          reason: "Transactions are functional, not theatrical"
        exploratory:
          preferred_ms: 400
          max_ms: 800
          reason: "Exploration allows more playfulness"

    blur:
      max_radius_px: 16
      description: "Maximum blur radius"
      reason: "Heavy blur is expensive and can hide UI issues"
      violation: "CEILING_VIOLATION"
      uses:
        - name: "subtle"
          radius: 4
          use: "Slight softening, glass morphism hint"
        - name: "medium"
          radius: 8
          use: "Modal backdrops, focus indication"
        - name: "heavy"
          radius: 16
          use: "Full overlay blur (use sparingly)"

    border_radius:
      max_px: 24
      description: "Maximum border radius"
      reason: "Excessive rounding loses structural clarity"
      violation: "CEILING_VIOLATION"
      scale:
        - name: "none"
          value: 0
          use: "Tables, code blocks, structured data"
        - name: "sm"
          value: 4
          use: "Input fields, small buttons"
        - name: "md"
          value: 8
          use: "Cards, containers"
        - name: "lg"
          value: 12
          use: "Modals, large interactive elements"
        - name: "xl"
          value: 16
          use: "Featured elements, CTAs"
        - name: "2xl"
          value: 24
          use: "Pills, badges, avatars"
        - name: "full"
          value: 9999
          use: "Circles only (avatars, icons)"

  # ═══════════════════════════════════════════════════════════════════
  # ENFORCEMENT
  # ═══════════════════════════════════════════════════════════════════

  enforcement:
    violation_type: "CEILING_VIOLATION"
    severity: "BLOCK"
    can_override: true
    override_authority: "Taste Key"

    agent_rules:
      primary: |
        Generate at ceiling, not above.
        Simpler is often better.
        When in doubt, go lower, not higher.

      on_gradient: |
        Check stop count before generating.
        If design calls for 3+ stops, suggest alternatives:
        - Two-color gradient with opacity
        - Solid color with subtle overlay
        - Image/pattern instead

      on_shadow: |
        Check existing shadow layers.
        If adding would exceed 3, suggest:
        - Combine shadows into fewer layers
        - Use elevation scale instead of custom shadows
        - Reduce shadow complexity

      on_animation: |
        Check duration before implementing.
        If exceeds ceiling for zone:
        - Suggest splitting into stages
        - Use spring physics to feel faster
        - Reduce to functional minimum

      on_blur: |
        Check radius before applying.
        If exceeds 16px:
        - Suggest reducing radius
        - Use semi-transparent solid instead
        - Reconsider if blur is necessary

      on_border_radius: |
        Check radius against max.
        If exceeds 24px (and not full circle):
        - Suggest using xl (16px) instead
        - Check if element is meant to be pill/circle
        - Reduce to maintain structural clarity

  # ═══════════════════════════════════════════════════════════════════
  # THE PRINCIPLE
  # ═══════════════════════════════════════════════════════════════════

  principle:
    summary: "The ceiling is intentional limitation, not technical constraint."

    statements:
      - "We CAN render 10-stop gradients. We WON'T."
      - "We CAN add 5 shadow layers. We WON'T."
      - "We CAN animate for 2 seconds. We WON'T."
      - "Capability is not permission."
      - "Restraint is a feature, not a bug."

    when_user_asks_for_more: |
      1. Explain the ceiling exists intentionally
      2. Show what "more" would break (resonance, focus, performance)
      3. Offer alternatives within ceiling
      4. If they insist, require Taste Key approval
      5. Document the exception in taste-key/rulings/
