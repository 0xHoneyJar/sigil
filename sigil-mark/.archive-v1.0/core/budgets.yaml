# Sigil Core: Budget System
# Fidelity ceiling prevents "too good." Budgets prevent "too much."

budgets:
  # ═══════════════════════════════════════════════════════════════════
  # COGNITIVE BUDGET
  # ═══════════════════════════════════════════════════════════════════

  cognitive:
    description: |
      How much mental load can the user handle in this zone?
      More elements = more decisions = more fatigue.

    limits:
      interactive_elements:
        description: "Clickable, tappable, or interactive items visible at once"
        by_zone:
          critical: 5
          transactional: 12
          exploratory: 20
          marketing: 15
          admin: 30
        violation: "BUDGET_VIOLATION"
        override: "Taste Key can override with justification"

      decisions_required:
        description: "Number of choices user must make to complete action"
        by_zone:
          critical: 2
          transactional: 5
          exploratory: 10
          marketing: 3
          admin: 10
        violation: "BUDGET_VIOLATION"
        override: "Taste Key can override with justification"

      text_density:
        description: "Maximum words visible in primary content area"
        by_zone:
          critical: 50
          transactional: 100
          exploratory: 300
          marketing: 150
          admin: 500
        unit: "words"
        violation: "BUDGET_VIOLATION"
        override: "Taste Key can override with justification"

  # ═══════════════════════════════════════════════════════════════════
  # VISUAL BUDGET
  # ═══════════════════════════════════════════════════════════════════

  visual:
    description: |
      Visual complexity creates cognitive load.
      Too many colors, animations, or layers overwhelm.

    limits:
      color_count:
        description: "Distinct hues visible simultaneously"
        max: 5
        note: "Shades of same hue count as 1"
        violation: "BUDGET_VIOLATION"
        override: "Taste Key can override with justification"

      animation_count:
        description: "Concurrent animations in viewport"
        by_zone:
          critical: 1
          transactional: 2
          exploratory: 5
          marketing: 5
          admin: 1
        violation: "BUDGET_VIOLATION"
        override: "Taste Key can override with justification"

      depth_layers:
        description: "Z-index stacking depth (modals, dropdowns, tooltips)"
        max: 4
        layers:
          - name: "base"
            z: 0
            description: "Page content"
          - name: "elevated"
            z: 10
            description: "Cards, hover states"
          - name: "overlay"
            z: 100
            description: "Dropdowns, tooltips"
          - name: "modal"
            z: 1000
            description: "Modals, dialogs"
        violation: "BUDGET_VIOLATION"
        override: "Taste Key can override with justification"

  # ═══════════════════════════════════════════════════════════════════
  # COMPLEXITY BUDGET
  # ═══════════════════════════════════════════════════════════════════

  complexity:
    description: |
      Component complexity budget.
      Prevents components from becoming unmaintainable.

    limits:
      props_per_component:
        description: "Maximum props a single component should accept"
        max: 10
        note: "Beyond 10, consider composition or context"
        violation: "BUDGET_VIOLATION"
        override: "Taste Key can override with justification"

      variants_per_component:
        description: "Maximum visual variants (size, color, state)"
        max: 12
        calculation: "sizes × colors × states"
        example: "3 sizes × 2 colors × 2 states = 12 variants"
        violation: "BUDGET_VIOLATION"
        override: "Taste Key can override with justification"

      dependencies_per_component:
        description: "Maximum direct dependencies (imports)"
        max: 8
        note: "Beyond 8, component is doing too much"
        violation: "BUDGET_VIOLATION"
        override: "Taste Key can override with justification"

  # ═══════════════════════════════════════════════════════════════════
  # ENFORCEMENT
  # ═══════════════════════════════════════════════════════════════════

  enforcement:
    description: |
      Budget violations are BLOCK with override.
      Unlike physics violations (IMPOSSIBLE), budgets can be exceeded
      with Taste Key approval.

    violation_levels:
      BUDGET_VIOLATION:
        severity: "BLOCK"
        meaning: "Exceeds budget limit"
        can_override: true
        override_authority: "Taste Key"
        agent_behavior: |
          1. Warn about budget violation
          2. Show current count vs limit
          3. Suggest ways to reduce
          4. If user insists, require Taste Key approval

    agent_rules:
      before_generating: |
        Check cognitive budget for zone.
        Count interactive elements in design.
        If exceeds, warn and suggest reduction.

      before_adding_animation: |
        Count existing animations in viewport.
        If would exceed zone limit, warn.
        Suggest removing one to add one.

      before_adding_color: |
        Check distinct hues in design.
        If adding would exceed 5, warn.
        Suggest using shade of existing hue.

      on_component_creation: |
        Track props count during generation.
        If approaching 10, suggest composition.
        If exceeding 10, require justification.
