# Sigil Kernel: Physics Primitives
# IMMUTABLE after /codify --lock
# These are the laws of physics. You cannot create new physics—only compose them.

version: "1.0"
locked: false  # Set to true after /codify --lock
locked_at: null
locked_by: null

# ═══════════════════════════════════════════════════════════════════════════════
# LIGHT PRIMITIVES
# How materials interact with light
# ═══════════════════════════════════════════════════════════════════════════════

light:
  refract:
    id: "light.refract"
    name: "Refraction"
    description: "Light bends through material (Glass, VisionOS)"
    css_template: |
      backdrop-filter: blur({{blur}}px) saturate({{saturation}}%);
      background: rgba({{r}}, {{g}}, {{b}}, {{opacity}});
      -webkit-backdrop-filter: blur({{blur}}px) saturate({{saturation}}%);
    defaults:
      blur: 20
      saturation: 180
      opacity: 0.7
      r: 255
      g: 255
      b: 255
    references:
      - "iOS Control Center"
      - "VisionOS panels"
      - "macOS menu bar"

  diffuse:
    id: "light.diffuse"
    name: "Diffusion"
    description: "Light scatters softly, creating depth (Clay, Airbnb)"
    css_template: |
      background: linear-gradient(135deg, {{color_start}} 0%, {{color_end}} 100%);
      box-shadow:
        0 1px 2px rgba(0,0,0,{{shadow_sm}}),
        0 4px 12px rgba(0,0,0,{{shadow_md}}),
        0 8px 24px rgba(0,0,0,{{shadow_lg}});
    defaults:
      color_start: "#FAFAF9"
      color_end: "#F5F5F4"
      shadow_sm: 0.05
      shadow_md: 0.08
      shadow_lg: 0.06
    references:
      - "Airbnb cards"
      - "Nintendo UI"
      - "Stripe Dashboard"

  flat:
    id: "light.flat"
    name: "Flat"
    description: "No light interaction, pure information (Machinery, Terminal)"
    css_template: |
      background: {{background}};
      border: 1px solid {{border}};
    defaults:
      background: "#0A0A0A"
      border: "#2A2A2A"
    references:
      - "Linear interface"
      - "Terminal"
      - "VS Code"

  reflect:
    id: "light.reflect"
    name: "Reflection"
    description: "Light bounces off surface creating highlights"
    css_template: |
      background: linear-gradient(
        180deg,
        rgba(255,255,255,{{highlight}}) 0%,
        transparent 50%,
        rgba(0,0,0,{{shadow}}) 100%
      );
    defaults:
      highlight: 0.15
      shadow: 0.05
    references:
      - "iOS app icons"
      - "Skeuomorphic buttons"

# ═══════════════════════════════════════════════════════════════════════════════
# WEIGHT PRIMITIVES
# How materials respond to interaction (hover, active, drag)
# ═══════════════════════════════════════════════════════════════════════════════

weight:
  weightless:
    id: "weight.weightless"
    name: "Weightless"
    description: "Floats, minimal physical response"
    hover:
      transform: "translateY(-1px)"
      shadow_scale: 1.05
    active:
      transform: "scale(0.98)"
      shadow_scale: 0.95
    drag:
      transform: "scale(1.02)"
      shadow_scale: 1.1
    references:
      - "VisionOS windows"
      - "Floating action buttons"

  light:
    id: "weight.light"
    name: "Light"
    description: "Slight physical presence, responds gently"
    hover:
      transform: "translateY(-2px)"
      shadow_scale: 1.15
    active:
      transform: "translateY(1px)"
      shadow_scale: 0.9
    drag:
      transform: "translateY(-4px) scale(1.02)"
      shadow_scale: 1.3
    references:
      - "Material Design cards"
      - "Notion blocks"

  heavy:
    id: "weight.heavy"
    name: "Heavy"
    description: "Substantial, tactile, grounded (Clay)"
    hover:
      transform: "translateY(-3px)"
      shadow_scale: 1.3
    active:
      transform: "translateY(2px) scale(0.98)"
      shadow_scale: 0.7
    drag:
      transform: "translateY(-6px) rotate(2deg)"
      shadow_scale: 1.5
    references:
      - "Airbnb booking button"
      - "Teenage Engineering knobs"
      - "OSRS inventory items"

  none:
    id: "weight.none"
    name: "None"
    description: "No physical response, instant state change (Machinery)"
    hover: {}
    active: {}
    drag: {}
    references:
      - "Linear buttons"
      - "Terminal commands"

# ═══════════════════════════════════════════════════════════════════════════════
# MOTION PRIMITIVES
# How materials transition between states
# ═══════════════════════════════════════════════════════════════════════════════

motion:
  instant:
    id: "motion.instant"
    name: "Instant"
    description: "No transition, immediate state change"
    duration_ms: 0
    easing: "step-end"
    css: "transition: none;"
    references:
      - "Linear"
      - "Terminal"
      - "Vim"

  linear:
    id: "motion.linear"
    name: "Linear"
    description: "Constant velocity, mechanical"
    duration_ms: 200
    easing: "linear"
    css: "transition: all 200ms linear;"
    references:
      - "Progress bars"
      - "Loading indicators"

  ease:
    id: "motion.ease"
    name: "Ease"
    description: "Natural deceleration (Glass)"
    duration_ms: 200
    easing: "ease-out"
    css: "transition: all 200ms ease-out;"
    references:
      - "iOS animations"
      - "macOS"

  spring:
    id: "motion.spring"
    name: "Spring"
    description: "Organic, bouncy, alive (Clay)"
    duration_ms: 300
    easing: "cubic-bezier(0.34, 1.56, 0.64, 1)"
    config:
      stiffness: 120
      damping: 14
      mass: 1
    css: "transition: all 300ms cubic-bezier(0.34, 1.56, 0.64, 1);"
    react_spring: |
      useSpring({
        config: { tension: 120, friction: 14 }
      })
    references:
      - "Airbnb"
      - "Stripe"
      - "Framer"

  step:
    id: "motion.step"
    name: "Step"
    description: "Tick-aligned, discrete frames (OSRS)"
    duration_ms: 0
    easing: "step-end"
    tick_rate_ms: 600
    css: "transition: none; /* tick-aligned */"
    references:
      - "Old School RuneScape"
      - "Pixel art games"
      - "Retro interfaces"

  deliberate:
    id: "motion.deliberate"
    name: "Deliberate"
    description: "Slow, intentional, trust-building"
    duration_ms: 800
    easing: "cubic-bezier(0.25, 0.1, 0.25, 1)"
    css: "transition: all 800ms cubic-bezier(0.25, 0.1, 0.25, 1);"
    references:
      - "Bank transactions"
      - "Confirmation flows"
      - "High-stakes actions"

# ═══════════════════════════════════════════════════════════════════════════════
# FEEDBACK PRIMITIVES
# How materials communicate state to users
# ═══════════════════════════════════════════════════════════════════════════════

feedback:
  none:
    id: "feedback.none"
    name: "None"
    description: "No visual feedback"
    css: ""

  highlight:
    id: "feedback.highlight"
    name: "Highlight"
    description: "Background color change only (Machinery)"
    css_template: "background-color: rgba(255,255,255,{{opacity}});"
    defaults:
      opacity: 0.05
    references:
      - "Linear hover states"
      - "VS Code selections"

  lift:
    id: "feedback.lift"
    name: "Lift"
    description: "Element rises on hover (Clay)"
    css_template: |
      transform: translateY(-{{amount}}px);
      box-shadow: 0 {{shadow}}px {{shadow_blur}}px rgba(0,0,0,0.1);
    defaults:
      amount: 2
      shadow: 8
      shadow_blur: 24
    references:
      - "Airbnb cards"
      - "Material Design"

  depress:
    id: "feedback.depress"
    name: "Depress"
    description: "Element pushes down on click (Clay)"
    css_template: |
      transform: translateY({{amount}}px) scale(0.98);
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    defaults:
      amount: 1
    references:
      - "Physical buttons"
      - "Skeuomorphic UI"

  glow:
    id: "feedback.glow"
    name: "Glow"
    description: "Soft luminance on focus/hover (Glass)"
    css_template: "box-shadow: 0 0 {{radius}}px {{spread}}px {{color}};"
    defaults:
      radius: 10
      spread: 2
      color: "rgba(255,255,255,0.1)"
    references:
      - "Focus rings"
      - "VisionOS"

  ripple:
    id: "feedback.ripple"
    name: "Ripple"
    description: "Radial expansion from touch point"
    css_template: |
      /* Requires JS for touch point */
      background: radial-gradient(circle at var(--x) var(--y), {{color}} 0%, transparent 70%);
    defaults:
      color: "rgba(255,255,255,0.3)"
    references:
      - "Material Design"
      - "Android buttons"

  pulse:
    id: "feedback.pulse"
    name: "Pulse"
    description: "Attention-grabbing animation"
    css_template: |
      animation: sigil-pulse {{duration}}ms ease-in-out infinite;
      @keyframes sigil-pulse {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale({{scale}}); opacity: {{opacity}}; }
      }
    defaults:
      duration: 2000
      scale: 1.05
      opacity: 0.8
    references:
      - "Notification badges"
      - "Call to action"

  xp_drop:
    id: "feedback.xp_drop"
    name: "XP Drop"
    description: "Rising confirmation text (OSRS style)"
    css_template: |
      animation: sigil-xp-drop {{duration}}ms ease-out forwards;
      @keyframes sigil-xp-drop {
        0% { transform: translateY(0); opacity: 1; }
        100% { transform: translateY(-{{distance}}px); opacity: 0; }
      }
    defaults:
      duration: 1500
      distance: 40
    references:
      - "Old School RuneScape"
      - "Diablo loot"

# ═══════════════════════════════════════════════════════════════════════════════
# SURFACE PRIMITIVES
# Material surface properties
# ═══════════════════════════════════════════════════════════════════════════════

surface:
  transparent:
    id: "surface.transparent"
    name: "Transparent"
    description: "Fully see-through"
    css: "background: transparent;"

  translucent:
    id: "surface.translucent"
    name: "Translucent"
    description: "Partially see-through with blur"
    css_template: |
      background: rgba({{r}}, {{g}}, {{b}}, {{opacity}});
      backdrop-filter: blur({{blur}}px);
    defaults:
      r: 255
      g: 255
      b: 255
      opacity: 0.7
      blur: 20

  solid:
    id: "surface.solid"
    name: "Solid"
    description: "Opaque surface"
    css_template: "background: {{color}};"
    defaults:
      color: "#FFFFFF"

  textured:
    id: "surface.textured"
    name: "Textured"
    description: "Surface with noise/grain"
    css_template: |
      background: {{color}};
      background-image: url('{{texture}}');
      background-blend-mode: {{blend}};
    defaults:
      color: "#FAFAFA"
      texture: "data:image/svg+xml,..."  # Noise SVG
      blend: "overlay"
    references:
      - "Paper textures"
      - "Grain overlays"
